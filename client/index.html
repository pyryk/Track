<!doctype html>
<!-- Conditional comment for mobile ie7 blogs.msdn.com/b/iemobile/ -->
<!--[if IEMobile 7 ]>    <html class="no-js iem7" lang="en"> <![endif]-->
<!--[if (gt IEMobile 7)|!(IEMobile)]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
  <meta charset="utf-8">

  <title>Track</title>
  <meta name="description" content="">

  <!-- Mobile viewport optimization h5bp.com/ad -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">

  <!-- Home screen icon  Mathias Bynens mathiasbynens.be/notes/touch-icons -->
  <!-- For iPhone 4 with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/h/apple-touch-icon.png">
  <!-- For first-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/m/apple-touch-icon.png">
  <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="img/l/apple-touch-icon-precomposed.png">
  <!-- For nokia devices: -->
  <link rel="shortcut icon" href="img/l/apple-touch-icon.png">

  <!-- iOS web app, delete if not needed. https://github.com/h5bp/mobile-boilerplate/issues/94 -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <script>(function(){var a;if(navigator.platform==="iPad"){a=window.orientation!==90||window.orientation===-90?"img/startup-tablet-landscape.png":"img/startup-tablet-portrait.png"}else{a=window.devicePixelRatio===2?"img/startup-retina.png":"img/startup.png"}document.write('<link rel="apple-touch-startup-image" href="'+a+'"/>')})()</script>
  
  <!-- The script prevents links from opening in mobile safari. https://gist.github.com/1042026 -->
  <script>(function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)$/i;a.addEventListener("click",function(a){d=a.target;while(!f.test(d.nodeName))d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}})(document,window.navigator,"standalone")</script>
  
  <!-- Mobile IE allows us to activate ClearType technology for smoothing fonts for easy reading -->
  <meta http-equiv="cleartype" content="on">

  <!-- more tags for your 'head' to consider h5bp.com/d/head-Tips -->

  <!-- MBP Stylesheet -->
  <link rel="stylesheet" href="css/style.css">
  <!-- App Stylesheet -->
  <link href="css/app.css" rel="stylesheet" type="text/css" />
  

  <!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
  <script src="js/libs/modernizr-2.0.6.min.js"></script>
  <script src="js/config.js"></script>
  <!--<script src="http://192.168.0.199:8000/target/target-script-min.js#anonymous"></script>-->
</head>

<body>

  <div id="container">
    <header>
      <div id="back-button"></div>
      <h1><a href="#">Track</a></h1>
    </header>
    <div id="main" role="main">
    </div>
    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '167103313410896', // App ID
          channelUrl : '//localhost/channel.html', // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

        FB.Event.subscribe('auth.statusChange', handleStatusChange);
      };

      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));
    </script>
    <script>
      function handleStatusChange(response) {
        document.body.className = response.authResponse ? 'connected' : 'not_connected';

        if (response.authResponse) {
          console.log(response);
          //updateUserInfo(response);
        }
      }
    </script>
    <script>
      function loginUser() {    
        FB.login(function(response) { }, {scope:'email'});     
        }
    </script>
    <!--<footer>
      footer will be here
    </footer>-->
  </div> <!--! end of #container -->
  
  <script id="template-targetList" type="text/x-handlebars-template">
    {{#if error}}
      {{error}}
    {{/if}}
    <ul class="primary-list" id="target-list">
      <li class="header">Targets</li>
      {{#each items}}
        <li data-id="{{this.id}}">{{this.name}}</li>
      {{/each}}
      <li class="create-new"><span class="create-new text">Create a new target</span></li>
    </ul>
  </script>
  
  <script id="template-targetDetails" type="text/x-handlebars-template">
    {{#if error}}
      {{error}}
    {{/if}}
    <div id="target-details">
    {{#if target}}
      {{#with target}}
        <h2 class="target-name">{{name}}</h2>
        {{#unless detailsLoaded}}
          <img class="loading-indicator" src="img/ajax-loader.gif" alt="loading..." />
        {{/unless}}
        {{#if question}}
          <form id="answer-form">
            <p class="target-question">{{question}}</p>
            <p class="target-answer">
              <span class="answer negative"><img src="img/smiley-bad.png" alt=":("></span>
              <span class="answer positive"><img src="img/smiley-good.png" alt=":)"></span>
            </p>
          </form>
          <p><span class="link-button view-results">View Results</span></p>
        {{/if}}
      {{/with}}
    {{/if}}
    </div>
  </script>
  
  <script id="template-targetResults" type="text/x-handlebars-template">
    {{#if error}}
      {{error}}
    {{/if}}
    <div id="target-results">
    {{#if target}}
      {{#with target}}
        <h2 class="target-name">{{name}}</h2>
        {{#unless detailsLoaded}}
          <img class="loading-indicator" src="img/ajax-loader.gif" alt="loading..." />
        {{/unless}}
        {{#if question}}
            <p class="target-question">{{question}}</p>
            <div class="results">
            {{#with ../../aggregate}}
              <table>
              <tr class="target-answers"><th colspan="2">Overall</th></tr>
              <tr class="target-answers"><td class="result-number positive">{{positives}}</td><td class="answer positive">:)</td></tr>
              <tr class="target-answers"><td class="result-number positive">{{negatives}}</td><td class="answer negative">:(</td></tr>
              <tr class="target-answers"><th colspan="2">Recent</th></tr>
              <tr class="target-answers"><td colspan="2"><div class="graph"></div></td>
              </table>
            {{/with}}
            </div>
        {{/if}}
      {{/with}}
    {{/if}}
    </div>
  </script>
  
  <script id="template-targetCreate" type="text/x-handlebars-template">
    <div id="target-create">
      <form id="create-target-form">
        <h2 class="target-name"><input type="text" name="name" placeholder="Name" required /></h2>
        <p class="target-question"><input type="text" name="question" placeholder="Question" required /></p>
        <button class="save-target" type="submit">Create</button>
      </form>
    </div>
  </script>
  
  <script id="template-ownResult" type="text/x-handlebars-template">
    <div id="target-ownResult">
    {{#if error}}
      {{error}}
    {{else}}
      {{#with result}}
        <h2>Thanks!</h2>
        <div class="result-info">
          <div class="target">
            <h3 class="name">{{target.name}}</h3>
            <div class="result-info-body">
              <p>Your answer was saved!</p>
              <p class="question">{{target.question}}</p>
              <p class="answer">{{value}}</p>
            </div>
          </div>
        </div>
        <p><span class="link-button view-results">View Results</span></p>
      {{/with}}
    {{/if}}
    </div>
  </script>
  
  <script id="template-backButton" type="text/x-handlebars-template">
    {{#if title}}
      <span class="back-button">&lt; {{title}}</span>
    {{/if}}
  </script>
  
  <script id="template-loginScreen" type="text/x-handlebars-template">
    <div id="login">
      <p><button onClick="loginUser();">Login</button></p>
    </div>
    <div id="logout">
      <p><button  onClick="FB.logout();">Logout</button></p>
    </div>
  </script>

  <!-- JavaScript at the bottom for fast page loading -->
  <!-- libraries -->
  <script src="js/libs/jquery-1.7.1.min.js"></script>
  <script src="js/libs/spine.js"></script>
  <script src="js/libs/spine.route.js"></script>
  <script src="js/libs/handlebars.js"></script>
  <script src="js/libs/underscore-min.js"></script>
  <script src="js/libs/jquery.flot.min.js"></script>
  <script src="js/libs/cordova-1.5.0.js"></script>

  <!-- our code -->
  <script src="js/models.js?2135123513251"></script>
  <script src="js/controllers.js?2135123513251"></script>
  <script src="js/app.js?2135123513251"></script>

  <!-- scripts concatenated and minified via ant build script-->
  <script src="js/helper.js"></script>
  <script src="js/plugins.js"></script>
  <!-- end scripts-->

  <!-- Debugger - remove for production -->
  <!-- <script src="https://getfirebug.com/firebug-lite.js"></script> -->

  <!-- Asynchronous Google Analytics snippet. Change UA-XXXXX-X to be your site's ID.
       mathiasbynens.be/notes/async-analytics-snippet -->
       <!--
  <script>
    var _gaq=[["_setAccount","UA-XXXXX-X"],["_trackPageview"]];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
    g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";
    s.parentNode.insertBefore(g,s)}(document,"script"));
  </script> -->
  <script type="text/javascript">
    jQuery(function($) {
      window.track = new App();
    });
  </script>
</body>
</html>